# Configuración de Samba para Storage Backup

# Archivo: /etc/samba/smb.conf

[global]
    workgroup = SADLAB
    server string = Storage Backup Server
    netbios name = STORAGE
    security = user
    map to guest = bad user
    dns proxy = no
    socket options = TCP_NODELAY
    load printers = no
    log file = /var/log/samba/log.%m
    max log size = 1000
    
    # Configuración de red
    hosts allow = 192.168.56.0/24 127.0.0.1
    hosts deny = 0.0.0.0/0
    
    # Configuración para Windows
    server role = standalone server
    passdb backend = tdbsam
    obey pam restrictions = yes
    unix password sync = yes
    passwd program = /usr/bin/passwd %u
    passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
    pam password change = yes

[homes]
    comment = Home Directories
    browseable = no
    read only = no
    create mask = 0700
    directory mask = 0700
    valid users = %S

[shared]
    comment = Shared Storage
    path = /srv/shared
    browseable = yes
    read only = no
    guest ok = no
    create mask = 0664
    directory mask = 0775
    force group = shared
    valid users = @shared, backup

[backup]
    comment = Backup Storage
    path = /srv/backup
    browseable = yes
    read only = no
    guest ok = no
    create mask = 0660
    directory mask = 0770
    force user = backup
    force group = backup
    valid users = backup

[public]
    comment = Public Directory
    path = /srv/public
    browseable = yes
    read only = no
    guest ok = yes
    create mask = 0666
    directory mask = 0777
    force user = nobody