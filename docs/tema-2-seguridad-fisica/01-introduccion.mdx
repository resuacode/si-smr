---
title: Seguridad F√≠sica y Medidas Pasivas
sidebar_position: 1
---

# Tema 2: Seguridad F√≠sica y Medidas Pasivas

En este tema veremos como aplicar medidas de seguridad pasiva para proteger f√≠sicamente los sistemas inform√°ticos y controlar el acceso a los mismos.

## Contenidos

1. Protecci√≥n F√≠sica y Ambiental de los Equipos
   - Necesidad de proteger f√≠sicamente los sistemas inform√°ticos
   - Caracter√≠sticas del emplazamiento y condiciones ambientales
   - Sistemas de alimentaci√≥n ininterrumpida:
      - SAI/UPS
      - Funcionamiento y puntos de aplicaci√≥n
2. Control de Acceso L√≥gico B√°sico
   - Listas de contorl de acceso (ACLs)
      - Esquematizaci√≥n
      - Aplicaci√≥n
   - Pol√≠tica de contrase√±as: importancia y establecimiento de requisitos
   - Sistemas biom√©tricos de identificaci√≥n: ventajas de su uso

## Ejercicios Pr√°cticos - Control de Acceso L√≥gico

Los siguientes ejercicios est√°n dise√±ados para practicar los conceptos de control de acceso l√≥gico utilizando las m√°quinas virtuales del laboratorio SAD. Estos ejercicios complementan el contenido te√≥rico del archivo 03-control-acceso-logico.mdx.

### Preparaci√≥n del Entorno

Antes de comenzar con los ejercicios, aseg√∫rate de tener las siguientes m√°quinas virtuales ejecut√°ndose seg√∫n el ejercicio:

**M√°quinas Linux:**
- **Ubuntu Server** (192.168.56.10) - SSH: localhost:2210
- **Kali Security** (192.168.56.20) - SSH: localhost:2220  
- **Storage Backup** (192.168.56.13) - SSH: localhost:2213

**M√°quinas Windows:**
- **Windows Server** (192.168.56.11) - RDP: localhost:3389
- **Windows Client** (192.168.56.12) - RDP: localhost:3390

**Credenciales por defecto:**
- Ubuntu Server: `admin:adminSAD2024!`
- Kali Security: `kali:kali`
- Storage Backup: `backup:backup123`
- Windows Server: `vagrant:vagrant` o `labadmin:Password123!`
- Windows Client: `vagrant:vagrant` o `cliente:User123!`

:::info Optimizaci√≥n de Recursos
No es necesario ejecutar todas las m√°quinas simult√°neamente. Cada ejercicio especifica qu√© m√°quinas necesitas. Para ejercicios b√°sicos, usa solo 2-3 m√°quinas a la vez.
:::

:::danger ‚ö†Ô∏è IMPORTANTE: Crear Snapshots o Clones Enlazados ANTES de Comenzar

**ANTES de realizar cualquier ejercicio, es OBLIGATORIO crear clones enlazados o snapshots de las m√°quinas virtuales.** Los ejercicios incluyen configuraciones que pueden modificar significativamente el sistema y, en caso de error, necesitar√°s restaurar el estado inicial.

### Opci√≥n A: Crear Clones Enlazados (Recomendado)

Para cada m√°quina virtual que vayas a usar:

1. **Apaga completamente la m√°quina virtual** (no la suspendas)
2. Clic derecho sobre la VM en VirtualBox ‚Üí **"Clonar..."**
3. **Nombre**: `[Nombre-Original]-LAB-Original` (ej: `SAD-Ubuntu-Server-LAB-Original`)
4. **Tipo de clonaci√≥n**: Selecciona **"Clonaci√≥n enlazada"**
5. **Instant√°nea**: Mant√©n "Estado actual de la m√°quina"
6. Finaliza el proceso

### Opci√≥n B: Crear Snapshots

1. Selecciona la VM en VirtualBox
2. Ve a la pesta√±a **"Instant√°neas"** 
3. Clic en **"Tomar"** (icono de c√°mara)
4. **Nombre**: `Estado-Inicial-Ejercicios`
5. **Descripci√≥n**: `Snapshot antes de ejercicios de control de acceso l√≥gico`

### ¬øPor qu√© es importante?

- **Los ejercicios modifican configuraciones cr√≠ticas** del sistema (PAM, SSH, usuarios, etc.)
- **Algunos cambios pueden dejar el sistema inaccesible** si se cometen errores
- **Permite experimentar sin miedo** y aprender de los errores
- **Ahorra tiempo** al no tener que reconfigurar todo desde cero
- **Es una pr√°ctica profesional** est√°ndar en administraci√≥n de sistemas

### Restauraci√≥n r√°pida:

- **Clones enlazados**: Simplemente elimina la VM "da√±ada" y clona nuevamente desde el original
- **Snapshots**: Clic derecho en el snapshot ‚Üí "Restaurar instant√°nea"

**üí° Consejo profesional**: En entornos reales, SIEMPRE se hacen snapshots antes de cambios importantes en producci√≥n.
:::

### Ejercicio 1: Configuraci√≥n de Pol√≠ticas de Contrase√±as en Linux

**Objetivo:** Implementar y probar pol√≠ticas de contrase√±as seguras en el servidor Ubuntu utilizando PAM.

**M√°quina:** Ubuntu Server (192.168.56.10)

**Enunciado:**
1. Accede al servidor Ubuntu Server v√≠a SSH
2. Configura una pol√≠tica de contrase√±as que requiera:
   - Longitud m√≠nima de 10 caracteres
   - Al menos 1 may√∫scula, 1 min√∫scula, 1 n√∫mero y 1 car√°cter especial
   - No permitir reutilizar las √∫ltimas 5 contrase√±as
   - M√°ximo 90 d√≠as de validez, m√≠nimo 7 d√≠as entre cambios
3. Configura el bloqueo de cuentas despu√©s de 3 intentos fallidos durante 10 minutos
4. Crea tres usuarios de prueba: `user1`, `user2`, `user3`
5. Prueba la pol√≠tica intentando establecer contrase√±as d√©biles

**Resultado esperado:** Los usuarios solo podr√°n establecer contrase√±as que cumplan con los requisitos definidos. Los intentos de contrase√±as d√©biles ser√°n rechazados con mensajes explicativos.

**Archivos a modificar:**
- `/etc/pam.d/common-password`
- `/etc/login.defs`
- `/etc/security/faillock.conf`

### Ejercicio 2: Implementaci√≥n de Control de Acceso con ACLs

**Objetivo:** Configurar listas de control de acceso (ACLs) para gestionar permisos granulares en el sistema de archivos.

**M√°quina:** Ubuntu Server (192.168.56.10)

**Enunciado:**
1. Crea la siguiente estructura de directorios en `/home/empresa/`:
   ```
   /home/empresa/
   ‚îú‚îÄ‚îÄ administracion/
   ‚îú‚îÄ‚îÄ contabilidad/
   ‚îú‚îÄ‚îÄ desarrollo/
   ‚îî‚îÄ‚îÄ compartido/
   ```
2. Crea los grupos: `admin_group`, `contab_group`, `dev_group`
3. Asigna los usuarios creados anteriormente a diferentes grupos
4. Configura ACLs para que:
   - Los usuarios de `admin_group` tengan acceso completo a todos los directorios
   - Los usuarios de `contab_group` solo accedan a `contabilidad/` y `compartido/`
   - Los usuarios de `dev_group` solo accedan a `desarrollo/` y `compartido/`
   - El directorio `compartido/` permita lectura y escritura a todos los grupos
5. Crea archivos de prueba en cada directorio y verifica los permisos

**Resultado esperado:** Los usuarios solo podr√°n acceder a los directorios seg√∫n sus permisos asignados. Los intentos de acceso no autorizado ser√°n denegados.

**Comandos principales a utilizar:**
- `setfacl`, `getfacl`, `chmod`, `chown`, `chgrp`

### Ejercicio 3: Configuraci√≥n Segura de SSH y Auditor√≠a

**Objetivo:** Securizar el servicio SSH y implementar auditor√≠a de accesos.

**M√°quina:** Ubuntu Server (192.168.56.10)

**Enunciado:**
1. Modifica la configuraci√≥n SSH para:
   - Cambiar el puerto por defecto a 2222
   - Deshabilitar login de root
   - Permitir solo autenticaci√≥n por clave p√∫blica para el usuario `admin`
   - Limitar intentos de login a 3 por conexi√≥n
   - Configurar timeout de 300 segundos
2. Genera un par de claves SSH para el usuario `admin`
3. Configura un banner de advertencia personalizado
4. Habilita logging detallado de SSH
5. Desde Kali Security, intenta conectarte con diferentes m√©todos y analiza los logs

**Resultado esperado:** SSH funcionar√° solo en el puerto 2222, con autenticaci√≥n por clave para admin y logging completo de intentos de conexi√≥n.

**Archivos a modificar:**
- `/etc/ssh/sshd_config`
- `/etc/ssh/ssh_banner`

### Ejercicio 4: An√°lisis de Fortaleza de Contrase√±as

**Objetivo:** Utilizar herramientas de auditor√≠a para evaluar la fortaleza de contrase√±as del sistema.

**M√°quinas:** Ubuntu Server (192.168.56.10) y Kali Security (192.168.56.20)

**Enunciado:**
1. En Ubuntu Server:
   - Crea 5 usuarios adicionales con contrase√±as de diferentes niveles de complejidad
   - Extrae el archivo `/etc/shadow` para an√°lisis
2. En Kali Security:
   - Instala y configura John the Ripper
   - Utiliza diferentes m√©todos de ataque:
     - Single crack mode
     - Wordlist attack
     - Incremental mode (limitado)
   - Documenta qu√© contrase√±as fueron comprometidas y en qu√© tiempo
3. Analiza los resultados y prop√≥n mejoras en la pol√≠tica de contrase√±as

**Resultado esperado:** Identificaci√≥n de contrase√±as d√©biles y comprensi√≥n de la importancia de pol√≠ticas de contrase√±as robustas.

**Herramientas a utilizar:**
- `john`, `unshadow`, diccionarios de rockyou

### Ejercicio 5: Control de Acceso a Recursos Compartidos (Samba)

**Objetivo:** Configurar y securizar el acceso a recursos compartidos utilizando Samba con diferentes niveles de acceso.

**M√°quina:** Storage Backup (192.168.56.13)

**Enunciado:**
1. Configura Samba con las siguientes caracter√≠sticas:
   - Compartici√≥n `publico/` con acceso de solo lectura para todos los usuarios autenticados
   - Compartici√≥n `privado/` con acceso completo solo para usuarios del grupo `backup`
   - Compartici√≥n `departamentos/` con subdirectorios que tengan acceso espec√≠fico por grupos
2. Crea usuarios Samba: `usuario1`, `usuario2`, `administrador`
3. Configura logs detallados de acceso
4. Desde Ubuntu Server, monta los recursos compartidos y prueba los permisos
5. Implementa restricciones de IP para permitir acceso solo desde la red del laboratorio

**Resultado esperado:** Sistema de archivos compartidos con control de acceso granular y auditor√≠a completa de operaciones.

**Archivos a modificar:**
- `/etc/samba/smb.conf`

### Ejercicio 6: Implementaci√≥n de Sudo y Escalaci√≥n de Privilegios

**Objetivo:** Configurar el sistema sudo para control granular de privilegios administrativos.

**M√°quina:** Ubuntu Server (192.168.56.10)

**Enunciado:**
1. Configura diferentes niveles de acceso sudo:
   - Grupo `operators`: puede reiniciar servicios espec√≠ficos (apache2, mysql, ssh)
   - Grupo `backup_admins`: puede ejecutar comandos de backup y gesti√≥n de archivos
   - Grupo `network_admins`: puede ejecutar comandos de red y firewall
2. Crea usuarios y as√≠gnalos a estos grupos
3. Configura sudo para:
   - Requerir contrase√±a para todas las operaciones
   - Registrar todos los comandos ejecutados
   - Enviar notificaciones por email (simular) para comandos cr√≠ticos
4. Prueba cada nivel de acceso y verifica los logs

**Resultado esperado:** Control granular de privilegios administrativos con auditor√≠a completa de acciones realizadas.

**Archivo a modificar:**
- `/etc/sudoers` (usando `visudo`)

### Ejercicio 7: Monitorizaci√≥n y Detecci√≥n de Intrusiones

**Objetivo:** Implementar monitorizaci√≥n b√°sica para detectar intentos de acceso no autorizado.

**M√°quinas:** Ubuntu Server (192.168.56.10) y Kali Security (192.168.56.20)

**Enunciado:**
1. En Ubuntu Server:
   - Configura alertas para m√∫ltiples intentos fallidos de login
   - Implementa monitorizaci√≥n de archivos cr√≠ticos con `inotify`
   - Configura logs centralizados para servicios cr√≠ticos
   - Crea scripts que env√≠en alertas cuando se detecten patrones sospechosos
2. En Kali Security:
   - Simula diferentes tipos de ataques:
     - Ataques de fuerza bruta SSH
     - Intentos de escalaci√≥n de privilegios
     - Acceso a archivos sensibles
3. Analiza los logs y verifica que las alertas se generen correctamente

**Resultado esperado:** Sistema de monitorizaci√≥n que detecte y alerte sobre actividades sospechosas en tiempo real.

### Ejercicio 8: Control de Acceso en Windows Server - Pol√≠ticas de Seguridad Local

**Objetivo:** Configurar pol√≠ticas de seguridad local en Windows Server y comprender las diferencias con los sistemas Linux.

**M√°quina:** Windows Server (192.168.56.11)

**Enunciado:**
1. Accede al Windows Server v√≠a RDP (localhost:3389)
   - Usuario: `vagrant` / Contrase√±a: `vagrant`
   - O utiliza: `labadmin` / Contrase√±a: `Password123!`
2. Configura las siguientes pol√≠ticas de seguridad local usando `secpol.msc`:
   - **Pol√≠tica de contrase√±as:**
     - Longitud m√≠nima: 12 caracteres
     - Complejidad: Habilitada (may√∫sculas, min√∫sculas, n√∫meros, s√≠mbolos)
     - Vigencia m√°xima: 60 d√≠as
     - Recordar √∫ltimas 10 contrase√±as
   - **Pol√≠tica de bloqueo de cuentas:**
     - Umbral de bloqueo: 3 intentos
     - Duraci√≥n del bloqueo: 15 minutos
     - Restablecer contador despu√©s de: 10 minutos
   - **Pol√≠tica de auditor√≠a:**
     - Habilitar auditor√≠a de eventos de inicio de sesi√≥n
     - Habilitar auditor√≠a de acceso a objetos
     - Habilitar auditor√≠a de cambios de pol√≠tica
3. Crea los siguientes usuarios locales usando `lusrmgr.msc`:
   - `gerente` (grupo Administradores)
   - `empleado1` (grupo Usuarios)
   - `empleado2` (grupo Usuarios)
   - `invitado_temp` (grupo Invitados)
4. Configura derechos de usuario en `secpol.msc`:
   - Permitir inicio de sesi√≥n local solo a administradores y usuarios autorizados
   - Denegar inicio de sesi√≥n como servicio al grupo Invitados
   - Restringir acceso desde la red solo a usuarios autenticados
5. Prueba las pol√≠ticas:
   - Intenta crear contrase√±as d√©biles para los nuevos usuarios
   - Realiza intentos de inicio de sesi√≥n fallidos
   - Verifica los eventos en el Visor de eventos de Windows

**Resultado esperado:** Sistema Windows con pol√≠ticas de seguridad robustas comparables a las implementadas en Linux, comprendiendo las herramientas espec√≠ficas de Windows (GPO, secpol.msc, lusrmgr.msc).

**Herramientas de Windows utilizadas:**
- `secpol.msc` (Pol√≠tica de seguridad local)
- `lusrmgr.msc` (Usuarios y grupos locales)
- `eventvwr.msc` (Visor de eventos)
- `gpedit.msc` (Editor de directivas de grupo local)

### Ejercicio 9: Configuraci√≥n de Recursos Compartidos y Permisos NTFS en Windows

**Objetivo:** Implementar control de acceso granular utilizando permisos NTFS y recursos compartidos de Windows, comparando con las ACLs de Linux.

**M√°quina:** Windows Server (192.168.56.11)

**Enunciado:**
1. Crea la siguiente estructura de carpetas en `C:\EmpresaData\`:
   ```
   C:\EmpresaData\
   ‚îú‚îÄ‚îÄ Administracion\
   ‚îú‚îÄ‚îÄ Contabilidad\
   ‚îú‚îÄ‚îÄ Desarrollo\
   ‚îú‚îÄ‚îÄ RecursosHumanos\
   ‚îî‚îÄ‚îÄ Compartido\
   ```
2. Crea los siguientes grupos locales:
   - `Admin_Group`
   - `Contab_Group`
   - `Dev_Group`
   - `RRHH_Group`
3. Asigna usuarios a grupos:
   - `gerente` ‚Üí `Admin_Group`
   - `empleado1` ‚Üí `Contab_Group`
   - `empleado2` ‚Üí `Dev_Group`
   - Crea `empleado3` y as√≠gnalo a `RRHH_Group`
4. Configura permisos NTFS (clic derecho ‚Üí Propiedades ‚Üí Seguridad):
   - `Administracion\`: Control total para `Admin_Group`, denegar acceso a otros
   - `Contabilidad\`: Control total para `Contab_Group`, lectura para `Admin_Group`
   - `Desarrollo\`: Control total para `Dev_Group`, lectura para `Admin_Group`
   - `RecursosHumanos\`: Control total para `RRHH_Group`, lectura para `Admin_Group`
   - `Compartido\`: Lectura y escritura para todos los grupos
5. Crea recursos compartidos de red para cada carpeta:
   - Configura permisos de recurso compartido diferentes a los NTFS
   - `Administracion$` (oculto) - solo `Admin_Group`
   - `Contabilidad` - `Contab_Group` y `Admin_Group`
   - `Desarrollo` - `Dev_Group` y `Admin_Group`
   - `RecursosHumanos` - `RRHH_Group` y `Admin_Group`
   - `Compartido` - Todos los usuarios autenticados
6. Desde Ubuntu Server, prueba el acceso a los recursos compartidos:
   ```bash
   # Instalar smbclient si no est√° disponible
   sudo apt install smbclient
   
   # Listar recursos compartidos
   smbclient -L //192.168.56.11 -U labuser
   
   # Intentar acceder a diferentes recursos
   smbclient //192.168.56.11/Compartido -U labuser
   ```
7. Habilita auditor√≠a de acceso a archivos:
   - En las propiedades de cada carpeta, pesta√±a Seguridad ‚Üí Opciones avanzadas ‚Üí Auditor√≠a
   - Configura auditor√≠a para "Control total" en intentos correctos e incorrectos
   - Verifica los eventos en el registro de seguridad

**Resultado esperado:** Comprensi√≥n de la diferencia entre permisos NTFS y permisos de recursos compartidos, implementaci√≥n de control de acceso granular en Windows comparable a las ACLs de Linux.

**Conceptos clave de Windows vs Linux:**
- **Windows**: Permisos NTFS + Permisos de recurso compartido (el m√°s restrictivo prevalece)
- **Linux**: ACLs POSIX + permisos tradicionales
- **Windows**: Auditor√≠a integrada en el sistema de archivos
- **Linux**: Auditor√≠a mediante auditd y herramientas espec√≠ficas

### Ejercicio 10: Integraci√≥n Cliente-Servidor Windows - Experiencia del Usuario Final

**Objetivo:** Simular un entorno corporativo completo probando el acceso desde un cliente Windows a recursos del servidor, experimentando las pol√≠ticas de seguridad desde la perspectiva del usuario final.

**M√°quinas:** Windows Server (192.168.56.11) y Windows Client (192.168.56.12)

**Enunciado:**

**Parte A: Configuraci√≥n en Windows Server**
1. Aseg√∫rate de que los ejercicios 8 y 9 est√©n completados (usuarios, grupos, recursos compartidos)
2. Crea un usuario adicional espec√≠fico para este ejercicio:
   - Usuario: `empleado_remoto`
   - Contrase√±a: `Temporal123!` (que deber√° cambiar en el primer inicio)
   - Grupo: `Dev_Group`
3. Configura una pol√≠tica adicional:
   - El usuario debe cambiar la contrase√±a en el pr√≥ximo inicio de sesi√≥n
   - Habilita "El usuario no puede cambiar la contrase√±a" temporalmente
   - Configura horarios de inicio de sesi√≥n (solo de 8:00 AM a 6:00 PM)

**Parte B: Experiencia desde Windows Client**
1. Accede al Windows Client v√≠a RDP (localhost:3390)
2. Intenta conectarte a los recursos compartidos del servidor usando diferentes m√©todos:
   
   **M√©todo 1 - Explorador de archivos:**
   ```
   - Abre el Explorador de archivos
   - En la barra de direcciones escribe: \\192.168.56.11
   - Prueba con diferentes credenciales
   ```
   
   **M√©todo 2 - L√≠nea de comandos:**
   ```cmd
   # Mapear unidad de red
   net use Z: \\192.168.56.11\Desarrollo /user:empleado_remoto
   
   # Ver unidades mapeadas
   net use
   
   # Acceder a la unidad
   dir Z:
   
   # Desconectar unidad
   net use Z: /delete
   ```
   
   **M√©todo 3 - PowerShell:**
   ```powershell
   # Crear credencial de forma segura
   $credential = Get-Credential
   
   # Mapear unidad con credencial
   New-PSDrive -Name "Y" -PSProvider FileSystem -Root "\\192.168.56.11\Compartido" -Credential $credential
   
   # Listar contenido
   Get-ChildItem Y:
   ```

3. **Pruebas de pol√≠ticas de seguridad:**
   - Intenta acceder con credenciales incorrectas (verifica el bloqueo de cuenta)
   - Prueba el acceso fuera del horario permitido (si es posible simular)
   - Intenta acceder a recursos no autorizados
   - Cambia la contrase√±a cuando el sistema lo requiera

4. **Monitorizaci√≥n desde el cliente:**
   - Abre el Visor de eventos local (`eventvwr.msc`)
   - Revisa los eventos de seguridad relacionados con autenticaci√≥n de red
   - Documenta los c√≥digos de evento que aparecen

**Parte C: An√°lisis de conectividad y troubleshooting**
1. **Pruebas de conectividad b√°sica:**
   ```cmd
   # Ping al servidor
   ping 192.168.56.11
   
   # Verificar puertos abiertos
   telnet 192.168.56.11 445
   
   # Resolver nombres NetBIOS
   nbtstat -A 192.168.56.11
   
   # Verificar conexiones activas
   netstat -an | findstr 192.168.56.11
   ```

2. **Herramientas de diagn√≥stico Windows:**
   ```cmd
   # Informaci√≥n de la cach√© de credenciales
   cmdkey /list
   
   # Informaci√≥n de sesiones SMB
   net session
   
   # Estado de la autenticaci√≥n Kerberos (si aplica)
   klist
   ```

3. **Simulaci√≥n de problemas comunes:**
   - Desconecta y reconecta la red
   - Cambia la hora del cliente (para simular problemas de sincronizaci√≥n)
   - Bloquea la cuenta del usuario intencionalmente
   - Intenta acceder desde fuera del horario permitido

**Resultado esperado:** 
- Comprensi√≥n completa del flujo de autenticaci√≥n cliente-servidor en Windows
- Experiencia pr√°ctica con herramientas de conectividad y diagn√≥stico
- Entendimiento de c√≥mo las pol√≠ticas del servidor afectan la experiencia del usuario
- Habilidades de troubleshooting en entornos Windows

**Documentaci√≥n requerida:**
- Capturas de pantalla de los diferentes m√©todos de conexi√≥n
- Log de eventos relevantes tanto del cliente como del servidor
- An√°lisis de los c√≥digos de error encontrados y su significado
- Comparaci√≥n entre la experiencia en Windows vs acceso desde Linux (ejercicio anterior)

### Ejercicio 11: Recuperaci√≥n y Fortalecimiento Post-Incidente

**Objetivo:** Simular un escenario de compromiso de credenciales y aplicar medidas de recuperaci√≥n en entornos mixtos.

**M√°quinas:** Ubuntu Server (192.168.56.10), Windows Server (192.168.56.11) y Kali Security (192.168.56.20)

**Enunciado:**

**Escenario:** Se ha detectado actividad sospechosa que indica que las credenciales de usuarios administrativos han sido comprometidas en ambos sistemas (Linux y Windows).

**Parte A: Respuesta inmediata en Linux (Ubuntu Server)**
1. Acciones de contenci√≥n:
   - Fuerza el cambio de contrase√±a del usuario `admin`
   - Revoca y regenera todas las claves SSH
   - Mata todas las sesiones SSH activas sospechosas
   - Cambia temporalmente el puerto SSH
2. Investigaci√≥n:
   - Analiza `/var/log/auth.log` para identificar IPs sospechosas
   - Revisa `/var/log/secure` para intentos de escalaci√≥n de privilegios
   - Examina el historial de comandos de usuarios comprometidos
   - Verifica integridad de archivos cr√≠ticos con `aide` o checksums

**Parte B: Respuesta inmediata en Windows (Windows Server)**
1. Acciones de contenci√≥n:
   - Deshabilita temporalmente las cuentas comprometidas
   - Fuerza el cambio de contrase√±a de `labadmin` y otros usuarios administrativos
   - Revisa y cierra sesiones RDP activas sospechosas
   - Cambia temporalmente el puerto RDP
2. Investigaci√≥n:
   - Analiza el registro de seguridad en `eventvwr.msc` (eventos 4624, 4625, 4648)
   - Revisa intentos de acceso fallidos y exitosos
   - Examina el registro de auditor√≠a de objetos
   - Verifica cambios en grupos de administradores locales

**Parte C: Fortalecimiento post-incidente (Ambos sistemas)**
1. **Linux - Medidas adicionales:**
   - Implementa fail2ban para bloqueo autom√°tico de IPs
   - Configura restricciones de horario con PAM
   - Habilita auditor√≠a avanzada con `auditd`
   - Implementa monitorizaci√≥n de archivos cr√≠ticos con `inotify`
   - Configura alertas autom√°ticas por email/syslog

2. **Windows - Medidas adicionales:**
   - Configura bloqueo autom√°tico de cuentas m√°s estricto
   - Implementa restricciones de horario de inicio de sesi√≥n
   - Habilita auditor√≠a avanzada de acceso a objetos
   - Configura alertas en el Visor de eventos
   - Implementa PowerShell logging avanzado

**Parte D: Verificaci√≥n y testing**
1. Desde Kali Security, realiza pruebas controladas:
   - Intenta ataques de fuerza bruta SSH (debe ser bloqueado)
   - Prueba ataques RDP (debe ser bloqueado)
   - Verifica que las alertas se generen correctamente
   - Documenta la efectividad de las contramedidas

**Resultado esperado:** 
- Procedimiento completo de respuesta a incidentes para entornos mixtos
- Comprensi√≥n de las diferencias en investigaci√≥n forense entre Linux y Windows
- Implementaci√≥n de contramedidas efectivas en ambos sistemas
- Capacidad de correlacionar eventos de seguridad entre m√∫ltiples sistemas


## Entrega Individual: Ejercicios resueltos y documentados

Cada estudiante debe completar y documentar una serie de ejercicios de los propuestos en este tema. La asignaci√≥n de ejercicios ser√° individual y se realizar√° al inicio de la sesi√≥n pr√°ctica.

Habr√° una serie de ejercicios que ser√°n comunes para todas las entregas, dichos ejercicios deben ser realizados por todos los estudiantes.

La documentaci√≥n debe incluir capturas de pantalla, comandos utilizados, configuraciones realizadas y resultados obtenidos.

Deben realizarse capturas de pantalla durante el proceso, documentar los comandos utilizados, los resultados obtenidos y cualquier problema encontrado.

### Evaluaci√≥n y Documentaci√≥n

Para cada ejercicio, documenta:

1. **Configuraciones realizadas**: Archivos modificados y cambios espec√≠ficos
2. **Pruebas ejecutadas**: Capturas de pantalla de las pruebas de funcionamiento
3. **Resultados obtenidos**: Verificaci√≥n de que los objetivos se cumplieron
4. **Problemas encontrados**: Dificultades y c√≥mo se resolvieron
5. **Mejoras propuestas**: Sugerencias para fortalecer a√∫n m√°s la seguridad

:::warning Importante
Antes de iniciar los ejercicios, crea snapshots de las m√°quinas virtuales para poder restaurar el estado inicial si es necesario. Realiza cada ejercicio en orden, ya que algunos dependen de configuraciones previas.
:::

:::tip Recursos Adicionales
- Consulta los logs del sistema regularmente: `/var/log/auth.log`, `/var/log/syslog`
- Utiliza `man` para obtener informaci√≥n detallada de los comandos utilizados
- Documenta todos los cambios para poder revertirlos si es necesario
:::

### Formato de la entrega

Por supuesto, la entrega debe ser individual y en formato PDF, respetando todo el formato establecido en la [**secci√≥n de formato de entregas**](../formato-entregas.mdx).

- Un √∫nico documento PDF que incluya:
  - Portada con nombre, apellidos, y ejercicio(s) realizados
  - √çndice de contenidos
  - Secci√≥n por cada ejercicio realizado con la documentaci√≥n requerida
- Nombre del archivo: `SAD_Tema2_SeguridadFisica_NombreApellido.pdf`
- Fecha l√≠mite de entrega: *Consultar en el Aula Virtual*.

:::warning ‚ö†Ô∏è Sobre el n√∫mero de p√°ginas de esta entrega
El n√∫mero de p√°ginas de esta entrega puede variar dependiendo del n√∫mero de ejercicios realizados y la cantidad de documentaci√≥n incluida. Sin embargo, se recomienda que cada ejercicio documentado no exceda las 5-7 p√°ginas, incluyendo capturas de pantalla y explicaciones detalladas. 

Si v√©is que para un ejercicio os est√°is excediendo demasiado, intentad poner las capturas menos relevantes en un anexo al final del documento, o bien reducir la cantidad de capturas si no aportan valor a√±adido a la explicaci√≥n. 

En general, una entrega completa con varios ejercicios podr√≠a oscilar entre 15 y 30 p√°ginas, pero lo m√°s importante es la calidad de la documentaci√≥n y la claridad en la explicaci√≥n de los pasos realizados.
:::
