---
sidebar_position: 4
---

# Post-Configuraci√≥n del Laboratorio

Pasos recomendados despu√©s de la instalaci√≥n inicial del laboratorio.

## ‚úÖ Checklist Post-Instalaci√≥n

### 1. üß™ Verificar Conectividad

```bash
# Ejecutar test autom√°tico
cd ~/laboratorio-sad
./test-conectividad.sh

# Verificar estado de VMs
vagrant status

# Verificar IPs
vagrant ssh ubuntu-server -c "ip addr show"
vagrant ssh kali-security -c "ip addr show"
vagrant ssh storage-backup -c "ip addr show"
```

**Resultado esperado**:
- ‚úÖ Todas las VMs responden a ping
- ‚úÖ Servicios SSH/RDP accesibles
- ‚úÖ Servicios web (Apache, IIS) funcionando

---

### 2. üíæ Crear Snapshots Iniciales

**¬øPor qu√©?**
- Poder restaurar estado limpio
- Recuperarse de errores
- Probar configuraciones sin miedo

**C√≥mo crear snapshots**:

```bash
# Opci√≥n A: Con VirtualBox (recomendado)
VBoxManage snapshot "SAD-Ubuntu-Server" take "instalacion-inicial" --description "Estado limpio despu√©s de instalaci√≥n"
VBoxManage snapshot "SAD-Windows-Server" take "instalacion-inicial"
VBoxManage snapshot "SAD-Windows-Client" take "instalacion-inicial"
VBoxManage snapshot "SAD-Storage-Backup" take "instalacion-inicial"
VBoxManage snapshot "SAD-Kali-Security" take "instalacion-inicial"

# Opci√≥n B: Script automatizado
for vm in "SAD-Ubuntu-Server" "SAD-Windows-Server" "SAD-Windows-Client" "SAD-Storage-Backup" "SAD-Kali-Security"; do
    VBoxManage snapshot "$vm" take "instalacion-inicial-$(date +%Y%m%d)"
done
```

**Verificar snapshots**:
```bash
VBoxManage snapshot "SAD-Ubuntu-Server" list
```

**Restaurar snapshot**:
```bash
# Detener VM primero
vagrant halt ubuntu-server

# Restaurar
VBoxManage snapshot "SAD-Ubuntu-Server" restore "instalacion-inicial"

# Reiniciar
vagrant up ubuntu-server
```

---

### 3. üîÑ Actualizar Sistemas

**‚ö†Ô∏è Importante**: Crear snapshot ANTES de actualizar.

#### Ubuntu Server:
```bash
vagrant ssh ubuntu-server
sudo apt update
sudo apt upgrade -y
sudo apt autoremove -y
exit
```

#### Kali Security:
```bash
vagrant ssh kali-security
sudo apt update
sudo apt upgrade -y
exit
```

#### Storage Backup:
```bash
vagrant ssh storage-backup
sudo apt update
sudo apt upgrade -y
exit
```

#### Windows (RDP):
```powershell
# En PowerShell como Administrador
sconfig  # Opci√≥n 6: Download and Install Updates

# O Windows Update desde configuraci√≥n
```

---

### 4. üîê Cambiar Contrase√±as (Opcional)

Si compartes el laboratorio o quieres m√°s seguridad:

#### Linux:
```bash
vagrant ssh ubuntu-server
passwd admin
# Introducir nueva contrase√±a
exit
```

#### Windows:
```powershell
# RDP como labadmin
net user labadmin NuevaPassword123!
```

**üìù Documentar**: Anotar nuevas contrase√±as en lugar seguro.

---

### 5. üìä Configurar Monitorizaci√≥n

#### Instalar herramientas de monitorizaci√≥n:

**Ubuntu Server**:
```bash
vagrant ssh ubuntu-server
sudo apt install -y htop iotop nethogs
exit
```

**Kali Security**:
```bash
vagrant ssh kali-security
# htop ya incluido en Kali
sudo apt install -y iftop
exit
```

#### Verificar recursos:
```bash
# Desde el host
VBoxManage list runningvms
VBoxManage metrics list

# Ver uso de CPU/RAM
VBoxManage metrics query "SAD-Ubuntu-Server" CPU/Load/User,RAM/Usage/Used
```

---

### 6. üåê Configurar Acceso a Internet

Todas las VMs tienen NAT por defecto, pero verifica:

```bash
# Test desde cada VM
vagrant ssh ubuntu-server -c "ping -c 3 8.8.8.8"
vagrant ssh ubuntu-server -c "curl -I https://www.google.com"
```

Si falla:
```bash
# Verificar ruta por defecto
vagrant ssh ubuntu-server -c "ip route"

# Debe mostrar:
# default via 10.0.2.2 dev eth0  (NAT)
# 192.168.56.0/24 dev eth1  (Host-Only)
```

---

### 7. üìÅ Configurar Carpetas Compartidas (Opcional)

Para compartir archivos entre host y VMs:

**En Vagrantfile**, a√±adir:
```ruby
config.vm.synced_folder "./compartido", "/vagrant/compartido"
```

**Uso**:
```bash
# Crear carpeta en host
mkdir ~/laboratorio-sad/compartido

# Recargar VM
vagrant reload ubuntu-server

# Acceder desde VM
vagrant ssh ubuntu-server
ls /vagrant/compartido
```

---

### 8. üî• Configurar Firewall (Producci√≥n)

**‚ö†Ô∏è Solo si el laboratorio estar√° en red p√∫blica**.

#### Ubuntu Server:
```bash
vagrant ssh ubuntu-server
sudo ufw enable
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 3306/tcp  # MySQL
sudo ufw allow from 192.168.56.0/24  # Red local
sudo ufw status
exit
```

#### Windows:
```powershell
# Habilitar firewall
netsh advfirewall set allprofiles state on

# Mantener reglas de ping, RDP ya configuradas
```

---

### 9. üìö Instalar Software Adicional

#### Ubuntu Server - Herramientas √∫tiles:
```bash
vagrant ssh ubuntu-server
sudo apt install -y \
    net-tools \
    vim \
    curl \
    wget \
    git \
    tree \
    tcpdump \
    netcat
exit
```

#### Kali - Metasploit (si se necesita):
```bash
vagrant ssh kali-security
sudo ~/install-metasploit.sh
# Esto instalar√° Metasploit Framework
exit
```

#### Windows Server - Herramientas admin:
```powershell
# Desde RDP como labadmin
# Instalar Chocolatey (gestor de paquetes)
Set-ExecutionPolicy Bypass -Scope Process -Force
[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072
iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

# Instalar herramientas
choco install -y sysinternals procexp notepadplusplus
```

---

### 10. üìù Documentar Tu Entorno

Crear archivo `mi-configuracion.md`:

```markdown
# Mi Configuraci√≥n del Laboratorio

## Informaci√≥n del Sistema Host
- OS: [tu OS]
- RAM total: [X GB]
- VirtualBox versi√≥n: [X.X.X]
- Vagrant versi√≥n: [X.X.X]

## Snapshots Creados
- [Fecha]: instalacion-inicial
- [Fecha]: pre-practica-modulo-3

## Contrase√±as Modificadas
- Ubuntu admin: [nueva contrase√±a]
- Windows labadmin: [nueva contrase√±a]

## Software Adicional Instalado
- Ubuntu: [lista de paquetes]
- Kali: [lista de herramientas]
- Windows: [lista de aplicaciones]

## Notas
- [Tus observaciones]
- [Problemas encontrados y soluciones]
```

---

### 11. üéì Preparar Ejercicios

Crear estructura para pr√°cticas:

```bash
mkdir -p ~/laboratorio-sad/ejercicios/{modulo2,modulo3,modulo4,modulo5,modulo6}
mkdir -p ~/laboratorio-sad/evidencias
mkdir -p ~/laboratorio-sad/backups
```

---

### 12. üöÄ Optimizar Rendimiento

#### A) Usar Linked Clones (ya configurado en Vagrantfile):
```ruby
vb.linked_clone = true
```

#### B) Ajustar recursos seg√∫n tu hardware:

**Si tienes 8GB RAM**:
```ruby
# Ubuntu: 1GB en lugar de 1.5GB
vb.memory = "1024"
```

**Si tienes 16GB RAM o m√°s**:
```ruby
# Puedes aumentar recursos
vb.memory = "2048"
vb.cpus = 2
```

#### C) Usar suspend en lugar de halt:
```bash
# M√°s r√°pido para trabajar d√≠a a d√≠a
vagrant suspend --all    # Al terminar
vagrant resume --all     # Al continuar
```

---

### 13. üì§ Exportar OVAs (Para compartir)

Si quieres compartir las VMs configuradas:

```bash
# Detener VM
vagrant halt ubuntu-server

# Exportar
VBoxManage export "SAD-Ubuntu-Server" \
    --output ubuntu-server-v1.0.ova \
    --manifest \
    --vsys 0 \
    --description "Ubuntu Server - Lab SAD v2.0" \
    --version "1.0"

# Calcular checksum
sha256sum ubuntu-server-v1.0.ova
```

---

### 14. üßπ Mantenimiento Regular

#### Semanal:
```bash
# Verificar espacio en disco
df -h

# Limpiar logs antiguos (en VMs)
vagrant ssh ubuntu-server -c "sudo journalctl --vacuum-time=7d"
```

#### Mensual:
```bash
# Actualizar sistemas
# Limpiar snapshots antiguos
VBoxManage snapshot "SAD-Ubuntu-Server" list
VBoxManage snapshot "SAD-Ubuntu-Server" delete "snapshot-antiguo"

# Compactar discos
VBoxManage modifymedium disk ruta/al/disco.vdi --compact
```

---

## ‚úÖ Checklist Final

Marca cuando completes cada paso:

- [ ] Test de conectividad exitoso
- [ ] Snapshots iniciales creados
- [ ] Sistemas actualizados
- [ ] Contrase√±as documentadas
- [ ] Herramientas de monitorizaci√≥n instaladas
- [ ] Acceso a Internet verificado
- [ ] Carpetas compartidas configuradas (opcional)
- [ ] Firewall configurado (si necesario)
- [ ] Software adicional instalado
- [ ] Entorno documentado
- [ ] Estructura de ejercicios creada
- [ ] Rendimiento optimizado
- [ ] OVAs exportadas (si necesario)

---

## üÜò Pr√≥ximos Pasos

1. **Familiarizarse**: Explora cada VM, servicios instalados
2. **Probar ejercicios**: Empezar con pr√°cticas b√°sicas
3. **Crear m√°s snapshots**: Antes de cada m√≥dulo
4. **Documentar**: Anotar problemas y soluciones
5. **Compartir**: Si trabajas en equipo, compartir configuraci√≥n

---

**Recuerda**: Siempre crear snapshot antes de cambios importantes.

---

**Versi√≥n**: 2.0  
**√öltima actualizaci√≥n**: Octubre 2025
